import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,a as s,b as i,d as n,w as l,e as d,r as o,o as p}from"./app-DyMv-yxf.js";const h={},c={class:"hint-container info"};function g(u,e){const a=o("RouteLink");return p(),t("div",null,[e[17]||(e[17]=s("p",null,"Upgrading the DSF from 1.9.0 to 2.0.0 involves modifying the docker-compose.yml files and recreating the containers.",-1)),e[18]||(e[18]=s("div",{class:"hint-container warning"},[s("p",{class:"hint-container-title"},"Update to DSF 1.9.0 first"),s("p",null,[i("When upgrading from DSF version < 1.9.0 it is important to migrate to "),s("a",{href:"../v1.9.0/upgrade-from-1"},"DSF 1.9.0 first"),i(".")])],-1)),s("p",null,[e[1]||(e[1]=i("For DSF 2, we refined the ",-1)),n(a,{to:"/operations/v2.0.0/install.html#prerequisites"},{default:l(()=>[...e[0]||(e[0]=[i("system requirements",-1)])]),_:1}),e[2]||(e[2]=i(". If your current DSF 1 setup works, it should also work with DSF 2. As DSF 2 is designed to support large file transfers, you might need to increase the storage on the DSF FHIR Server instance.",-1))]),s("div",c,[e[12]||(e[12]=s("p",{class:"hint-container-title"},"Non-standard configuration changes",-1)),e[13]||(e[13]=s("p",null,[i("Most non-standard configuration changes working in DSF 1 will continue to work in DSF 2. If you have set custom timeout options please change them to the ISO 8601 standard. "),s("code",null,"120000"),i(" (Milliseconds) must be changed to "),s("code",null,"PT2M"),i(".")],-1)),s("ul",null,[s("li",null,[e[4]||(e[4]=i("You can now use more advanced ",-1)),n(a,{to:"/operations/v2.0.0/fhir/logging.html"},{default:l(()=>[...e[3]||(e[3]=[i("logging options",-1)])]),_:1}),e[5]||(e[5]=i(".",-1))]),s("li",null,[e[7]||(e[7]=i("If you use your own certificate authority, the ",-1)),n(a,{to:"/operations/v2.0.0/root-certificates.html"},{default:l(()=>[...e[6]||(e[6]=[i("configuration",-1)])]),_:1}),e[8]||(e[8]=i(" will be easier.",-1))]),s("li",null,[e[10]||(e[10]=i("More granular control in ",-1)),n(a,{to:"/operations/v2.0.0/fhir/access-control.html"},{default:l(()=>[...e[9]||(e[9]=[i("access control / role config settings",-1)])]),_:1}),e[11]||(e[11]=i(".",-1))])])]),e[19]||(e[19]=s("p",null,[i("We recommend upgrading the PostgreSQL DBMS from version 15 to version 18. At present, it is possible to use PostgreSQL version 15, but we exclusively support PostgreSQL version 18 and test the DSF solely with version 18."),s("br"),i(" The DBMS upgrade is described below in the update instructions.")],-1)),s("p",null,[e[15]||(e[15]=i("DSF 2 was designed to run DSF 1 (APIv1) process plugins, but due to stricter validation rules in DSF 2 we strongly recommend using the latest compatible plugin versions. Updates within the same major and minor version (e.g., from 1.2.3.4 to 1.2.9.9) are generally safe. An overview of the recommended MII/NUM versions can be found ",-1)),n(a,{to:"/operations/v2.0.0/install-plugins.html"},{default:l(()=>[...e[14]||(e[14]=[i("here",-1)])]),_:1}),e[16]||(e[16]=i(".",-1))]),e[20]||(e[20]=d(`<h2 id="modify-dsf-fhir-server-setup" tabindex="-1"><a class="header-anchor" href="#modify-dsf-fhir-server-setup"><span>Modify DSF FHIR Server Setup</span></a></h2><ol><li><p>Preparation / Backup</p><ul><li>We recommend to create a backup of the <code>/opt/fhir</code> directory before proceeding with the upgrade.<br> For example using: <code>sudo cp -rp /opt/fhir /opt/fhir_backup_pre_2.0.0_upgrade</code></li></ul></li><li><p>Modify the DSF FHIR docker-compose.yml file, replace the version number with 2.0.0.</p></li></ol><div class="language-diff line-numbers-mode" data-highlighter="shiki" data-ext="diff" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-diff"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> version: &#39;3.8&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> services:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   proxy:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-    image: ghcr.io/datasharingframework/fhir_proxy:1.9.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+    image: ghcr.io/datasharingframework/fhir_proxy:2.0.0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     restart: on-failure</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   app:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-    image: ghcr.io/datasharingframework/fhir:1.9.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+    image: ghcr.io/datasharingframework/fhir:2.0.0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     restart: on-failure</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     environment:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-      DEV_DSF_FHIR_SERVER_ORGANIZATION_THUMBPRINT: f4344032fe77bffb...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The environment variable <code>DEV_DSF_FHIR_SERVER_ORGANIZATION_THUMBPRINT</code> does not need to be specified starting version 2.0.0. The thumbprint is now calculated based on the client certificate specified via <code>DEV_DSF_FHIR_CLIENT_CERTIFICATE</code>.</p><ol start="3"><li>Upgrade the DSF FHIR containers<br> From <code>/opt/fhir</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose up -d &amp;&amp; docker compose logs -f</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h2 id="modify-dsf-bpe-server-setup" tabindex="-1"><a class="header-anchor" href="#modify-dsf-bpe-server-setup"><span>Modify DSF BPE Server Setup</span></a></h2><ol><li><p>Preparation / Backup</p><ul><li>We recommend to create a backup of the <code>/opt/bpe</code> directory before proceeding with the upgrade.<br> For example using: <code>sudo cp -rp /opt/bpe /opt/bpe_backup_pre_2.0.0_upgrade</code></li></ul></li><li><p>Modify the DSF BPE docker-compose.yml file, replace the version number with 2.0.0.</p></li></ol><div class="language-diff line-numbers-mode" data-highlighter="shiki" data-ext="diff" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-diff"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> version: &#39;3.8&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> services:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   app:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-    image: ghcr.io/datasharingframework/bpe:1.9.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+    image: ghcr.io/datasharingframework/bpe:2.0.0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     restart: on-failure</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     environment:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-      DEV_DSF_BPE_DB_USER_CAMUNDA_PASSWORD_FILE: /run/secrets/db_user_camunda.password</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+      DEV_DSF_BPE_DB_USER_ENGINE_PASSWORD_FILE: /run/secrets/db_user_camunda.password</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><p>Upgrade the DSF BPE containers<br> From <code>/opt/bpe</code> execute</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose up -d &amp;&amp; docker compose logs -f</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Verify your upgrade:</p><ul><li>Verify the DSF FHIR server is running in version 2.0.0. The log should contain a message:<br><code>INFO main - BuildInfoReaderImpl.logBuildInfo(137) | Artifact: dsf-fhir-server-jetty, version: 2.0.0, [...]</code></li><li>Verify the DSF FHIR server started without errors</li><li>Verify the DSF FHIR server is accessible via https, for example by browsing to <a href="https://your-dsf-endpoint.de/fhir/" target="_blank" rel="noopener noreferrer">https://your-dsf-endpoint.de/fhir/</a> (authentication with your client-certificate)</li><li>Verify the DSF BPE server is running in version 2.0.0. The log should contain a message:<br><code>INFO main - BuildInfoReaderImpl.logBuildInfo(137) | Artifact: dsf-bpe-server-jetty, version: 2.0.0, [...]</code></li><li>Verify the DSF BPE server started without errors</li><li>Verify your install with a ping/pong test</li></ul></li></ol><h2 id="upgrade-postgresql-from-15-to-18" tabindex="-1"><a class="header-anchor" href="#upgrade-postgresql-from-15-to-18"><span>Upgrade PostgreSQL from 15 to 18</span></a></h2><p>To upgrade your DSF databases, you have to stop the application, dump your database, recreate the bind mount directory, update the version, start it, restore the backup and start the application again.</p><h3 id="on-the-dsf-fhir-server" tabindex="-1"><a class="header-anchor" href="#on-the-dsf-fhir-server"><span>On the DSF FHIR Server</span></a></h3><ol><li>Stop the application<br> From <code>/opt/fhir</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose down app</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Dump the database<br> From <code>/opt/fhir</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose exec db pg_dumpall -U liquibase_user &gt; dump.sql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Stop the database<br> From <code>/opt/fhir</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose down db</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Recreate the database bind mount directory<br> From <code>/opt/fhir</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mv postgres-data postgres-data-psql-15</span></span>
<span class="line"><span>mkdir postgres-data</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li>Update the version and change the bind mount target to respect the <a href="https://github.com/docker-library/postgres/pull/1259" target="_blank" rel="noopener noreferrer">PostgreSQL best practices</a> in <code>/opt/fhir/docker-compose.yml</code><div class="language-diff line-numbers-mode" data-highlighter="shiki" data-ext="diff" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-diff"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">db:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-    image: postgres:15</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+    image: postgres:18</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     restart: always</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     healthcheck:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -U liquibase_user -d fhir&quot;]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         interval: 10s</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         timeout: 5s</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         retries: 5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     volumes:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     - type: bind</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       source: ./postgres-data</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-      target: /var/lib/postgresql/data</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+      target: /var/lib/postgresql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>Start the new database<br> From <code>/opt/fhir</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose up -d db</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Restore the database dump<br> From <code>/opt/fhir</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat dump.sql | docker compose exec -T db psql -U liquibase_user fhir</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Start the application<br> From <code>/opt/fhir</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose up -d &amp;&amp; docker compose logs -f app</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h3 id="on-the-dsf-bpe-server" tabindex="-1"><a class="header-anchor" href="#on-the-dsf-bpe-server"><span>On the DSF BPE Server</span></a></h3><ol><li>Stop the application<br> From <code>/opt/bpe</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose down app</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Dump the database<br> From <code>/opt/bpe</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose exec db pg_dumpall -U liquibase_user &gt; dump.sql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Stop the database<br> From <code>/opt/bpe</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose down db</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Recreate the database bind mount directory<br> From <code>/opt/bpe</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>mv postgres-data postgres-data-psql-15</span></span>
<span class="line"><span>mkdir postgres-data</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li>Update the version and change the bind mount target to respect the <a href="https://github.com/docker-library/postgres/pull/1259" target="_blank" rel="noopener noreferrer">PostgreSQL best practices</a> in <code>/opt/bpe/docker-compose.yml</code><div class="language-diff line-numbers-mode" data-highlighter="shiki" data-ext="diff" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-diff"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">db:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-    image: postgres:15</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+    image: postgres:18</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     restart: always</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     healthcheck:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -U liquibase_user -d bpe&quot;]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         interval: 10s</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         timeout: 5s</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         retries: 5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     volumes:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     - type: bind</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       source: ./postgres-data</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-      target: /var/lib/postgresql/data</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+      target: /var/lib/postgresql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>Start the new database<br> From <code>/opt/bpe</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose up -d db</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Restore the database dump<br> From <code>/opt/bpe</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>cat dump.sql | docker compose exec -T db psql -U liquibase_user bpe</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Start the application<br> From <code>/opt/bpe</code> execute<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker compose up -d &amp;&amp; docker compose logs -f app</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><p>Once you have ensured that DSF is working successfully with the new database, you can remove the dump.sql file and the postgres-data-psql-15 directory. As a precaution, we recommend keeping the postgres-data-psql-15 directory for some time.</p>`,16))])}const b=r(h,[["render",g]]),v=JSON.parse('{"path":"/operations/v2.0.0/upgrade-from-1.html","title":"Upgrade from DSF 1.9.0","lang":"en-US","frontmatter":{"title":"Upgrade from DSF 1.9.0","icon":"update"},"git":{"createdTime":1762277391000,"updatedTime":1769015791000,"contributors":[{"name":"Simon Schweizer","username":"","email":"simon-tobias.schweizer@hs-heilbronn.de","commits":5},{"name":"Hauke Hund","username":"","email":"hauke.hund@hs-heilbronn.de","commits":2},{"name":"Maximilian Kurscheidt","username":"","email":"maximilian.kurscheidt@hs-heilbronn.de","commits":2}]},"readingTime":{"minutes":3.36,"words":1007},"filePathRelative":"operations/v2.0.0/upgrade-from-1.md","excerpt":"<p>Upgrading the DSF from 1.9.0 to 2.0.0 involves modifying the docker-compose.yml files and recreating the containers.</p>\\n<div class=\\"hint-container warning\\">\\n<p class=\\"hint-container-title\\">Update to DSF 1.9.0 first</p>\\n<p>When upgrading from DSF version &lt; 1.9.0 it is important to migrate to <a href=\\"../v1.9.0/upgrade-from-1\\">DSF 1.9.0 first</a>.</p>\\n</div>"}');export{b as comp,v as data};
